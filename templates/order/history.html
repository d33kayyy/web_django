{% extends 'layout/base.html' %}
{% load static %}
{% load humanize %}
{% load cart_tags %}
{% load widget_tweaks %}

{% block title %}
    Lịch sử mua hàng
{% endblock %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'order/order_history.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'users/profile.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'profile_panel.css' %}">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            {% include 'layout/profile_panel_snippet.html' with user=user %}

            <div class="col-md-9">
                {% for order in object_list %}
                    <div class="row succeed_form" {% if not forloop.first %}
                         style="margin-top: 15px"
                    {% endif %}>
                        <div class="col-md-7">
                            <div class="row tab">
                                <table class="table">
                                    <thead class="tab_name">
                                    <tr>
                                        <th style="background-color: #3ee852; color: white">Succeed</th>
                                        <th></th>
                                        <th class="text-right">
                                            <strong>{{ order.order_date|date:"SHORT_DATE_FORMAT" }}</strong></th>
                                        <th class="text-right"><strong>#{{ order.id }}</strong></th>
                                    </tr>
                                    </thead>
                                    <tbody class="borderless tab_body">

                                    {% for i in order.items.all %}
                                        <tr>
                                            {#                                            {{ i.item.name }} -  - {{ i.get_subtotal }}#}
                                            <td class="vert-align">
                                                <a href="{% url 'item:detail' i.item.slug %}">
                                                    <img class="food_img" src="{{ i.item.get_primary_image }}"/>
                                                </a>
                                            </td>
                                            <td class="vert-align">
                                                <a href="{% url 'item:detail' i.item.slug %}">{{ i.item.name }}</a>
                                            </td>
                                            <td class="vert-align">{{ i.quantity }}</td>
                                            <td class="price text-right vert-align">{{ i.get_subtotal }}</td>
                                        </tr>
                                    {% endfor %}

                                    <tr class="transport">
                                        <td><strong>Phí vận chuyển</strong></td>
                                        <td></td>
                                        <td></td>
                                        <td class="price text-right">10,000 VND</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-right">
                                            <strong>Tổng: {{ order.get_total_price|intcomma }} VND</strong>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="row tab_info">
                                <div>
                                    <table class="table">
                                        <thead class="order_info">
                                        <tr>
                                            <th class="order_info_header"><strong>Chi tiết đơn hàng</strong></th>
                                        </tr>
                                        </thead>
                                        <table class="table">
                                            <tbody class="tab_body">
                                            <tr>
                                                <td>Người nhận</td>
                                                <td class="text-right name">{{ order.receiver }}</td>
                                            </tr>
                                            <tr>
                                                <td>Thời gian đặt</td>
                                                <td class="text-right name"> {{ order.order_date|time:"H:i" }}</td>
                                            </tr>
                                            <tr>
                                                <td>Điện thoại</td>
                                                <td class="text-right name">{{ order.phone }}</td>
                                            </tr>
                                            <tr>
                                                <td>Địa chỉ</td>
                                                <td class="text-right name">
                                                    {{ order.address }}, Quận {{ order.district }}, {{ order.city }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Note</td>
                                                <td class="text-right">{{ order.note }}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                <!-- Fail Form //-->
                {#                <div class="row fail_form">#}
                {#                    <div class="col-md-7">#}
                {#                        <div class="row tab">#}
                {#                            <div>#}
                {#                                <table class="table">#}
                {#                                    <thead class="tab_name">#}
                {#                                    <tr>#}
                {#                                        <th class="status_fail">Failed</th>#}
                {#                                        <th></th>#}
                {#                                        <th class="date_order_num">12/06/2016</th>#}
                {#                                        <th class="date_order_num">#D38AM12</th>#}
                {#                                    </tr>#}
                {#                                    </thead>#}
                {#                                    <tbody class="borderless tab_body">#}
                {#                                    <tr>#}
                {#                                        <td><a href="../item.html"><img class="food_img" src="../../img/lasagna1.jpg"/></a>#}
                {#                                        </td>#}
                {#                                        <td><a href="../item.html">Bánh kem Gato</a></td>#}
                {#                                        <td>1</td>#}
                {#                                        <td class="price text-right">125,000 VND</td>#}
                {#                                    </tr>#}
                {#                                    <tr>#}
                {#                                        <td><a href="../item.html"><img class="food_img" src="../../img/lasagna1.jpg"/></a>#}
                {#                                        </td>#}
                {#                                        <td><a href="../item.html">Bánh kem Gato</a></td>#}
                {#                                        <td>1</td>#}
                {#                                        <td class="price text-right">125,000 VND</td>#}
                {#                                    </tr>#}
                {#                                    <tr class="transport">#}
                {#                                        <td>Phí vận chuyển</td>#}
                {#                                        <td></td>#}
                {#                                        <td></td>#}
                {#                                        <td class="price text-right">15,000 VND</td>#}
                {#                                    </tr>#}
                {#                                    </tr>#}
                {#                                    <tr>#}
                {#                                        <td></td>#}
                {#                                        <td></td>#}
                {#                                        <td></td>#}
                {#                                        <td class="text-right" style="font-weight: bold">Tổng: 150,000 VND</td>#}
                {#                                    </tr>#}
                {#                                    </tbody>#}
                {#                                </table>#}
                {#                            </div>#}
                {#                        </div>#}
                {#                    </div>#}
                {#                    <div class="col-md-5">#}
                {#                        <div class="row tab_info">#}
                {#                            <div>#}
                {#                                <table class="table">#}
                {#                                    <thead class="order_info">#}
                {#                                    <tr>#}
                {#                                        <th class="order_info_header"><strong>Chi tiết đơn hàng</strong></th>#}
                {#                                    </tr>#}
                {#                                    </thead>#}
                {#                                    <table class="table">#}
                {#                                        <tbody class="tab_body">#}
                {#                                        <tr>#}
                {#                                            <td>Người nhận</td>#}
                {#                                            <td class="name">Người nhận</td>#}
                {#                                        </tr>#}
                {#                                        <tr>#}
                {#                                            <td>Thời gian đặt</td>#}
                {#                                            <td class="name">Người nhận</td>#}
                {#                                        </tr>#}
                {#                                        <tr>#}
                {#                                            <td>Điện thoại</td>#}
                {#                                            <td class="name">Người nhận</td>#}
                {#                                        </tr>#}
                {#                                        <tr>#}
                {#                                            <td>Địa chỉ</td>#}
                {#                                            <td class="name">Người nhận</td>#}
                {#                                        </tr>#}
                {#                                        <tr>#}
                {#                                            <td>Note</td>#}
                {#                                            <td class="name">Người nhận</td>#}
                {#                                        </tr>#}
                {#                                        </tbody>#}
                {#                                    </table>#}
                {#                                </table>#}
                {#                            </div>#}
                {#                        </div>#}
                {#                    </div>#}
                {#                </div>#}
                <div class="row">
                    <div class="text-center margin_top_10">
                        <!--<div class="col-md-9 text-center" style="margin-top: 10px" >-->
                        <button id="button" class="custom_btn">More</button>
                        <!--</div>-->
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="container">
        {% for order in object_list %}
            <p>id = {{ order.id }}</p>
            <p>total = {{ order.get_total_price }}</p>
            <p>status = {{ order.status }}</p>
            <p>date = {{ order.order_date }}</p>
            <p>items: </p>
            <ul>
                {% for i in order.items.all %}
                    <li>{{ i.item.name }} - {{ i.quantity }} - {{ i.get_subtotal }}</li>
                {% endfor %}
            </ul>
        {% endfor %}
    </div>
{% endblock %}