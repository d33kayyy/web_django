{% load static %}
{% load notifications_tags %}
{% load my_noti_tags %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %} SiliSili {% endblock %}</title>

    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap-3.3.7/css/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'sticky-footer-navbar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'navbar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'notifications/notification.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

    {% block css %}{% endblock %}

    <link rel="shortcut icon" href="{% static 'images/logo.png' %}" type="image/x-icon"/>
</head>
<body onload="displayLineChart();">

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#my-navbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Silisili</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="my-navbar">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <div class="navbar-form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search">
                        </div>
                    </div>
                </li>
                <li>
                    <a href="{% url 'cart:cart' %}"><i class="fa fa-shopping-cart fa-lg"></i></a>
                </li>

                {#  Notification #}
                <li class="dropdown dropdown-notifications">
                    <a href="" class="dropdown-toggle" data-toggle="dropdown">
                        {#                        <i class="fa fa-bell fa-bell-slash">{% live_notify_badge classes="label label-danger" %}</i>#}
                        {% live_notify_count classes='glyphicon glyphicon-bell notification-icon' %}
                    </a>

                    <div class="dropdown-container">

                        <div class="dropdown-toolbar">
                            <h3 class="dropdown-toolbar-title pull-right">Mark all as read</h3>
                            <h3 class="dropdown-toolbar-title">Notifications ({% live_notify_badge %})</h3>
                        </div>

                        {#                        {% live_notify_list classes="dropdown-menu" %}#}

                        <ul id='live_notify_list' class="dropdown-menu">

                        </ul>

                        <div class="dropdown-footer text-center">
                            <a href="{% url 'notification' %}/#tab_information">View All</a>
                        </div>
                    </div><!-- /dropdown-container -->
                </li><!-- /dropdown -->

                <li class="dropdown" id="aa">
                    {% if user.is_authenticated %}
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            {% if user.profile.avatar %}
                                <img class="user_icon img-circle" src="{{ user.profile.avatar.url }}" alt="avatar"/>
                            {% else %}
                                <img class="user_icon img-circle" src="{% static "images/default-avatar.png" %}"
                                     alt="avatar"/>
                            {% endif %}
                        </a>

                        <ul class="dropdown-menu">
                            <li>
                                <a href="#" class="hidden-sm"><i class="fa fa-heart"></i> Pin </a>
                            </li>
                            <li>
                                {% if user.profile.is_chef %}
                                    <a href="{% url 'chef:dashboard' %}" class="hidden-sm"><i class="fa fa-tachometer"></i> Dashboard </a>
                                {% else %}
                                    <a href="#" class="hidden-sm"><i class="fa fa-star-o"></i> Cook with us! </a>
                                {% endif %}
                            </li>
                            <li>
                                <a href='{% url 'profile' %}' class="hidden-sm"><i class="fa fa-user"></i> Hồ sơ </a>
                            </li>
                            <li>
                                <a href="{% url 'account_logout' %}" class="hidden-sm"><i class="fa fa-sign-out"
                                                                                          aria-hidden="true"></i>
                                    Đăng xuất </a>
                            </li>
                        </ul>
                    {% else %}
                        <a href="{% url 'account_login' %}" class="hidden-sm"> Đăng nhập </a>
                        {# / Đăng xuất #}
                    {% endif %}
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

{% block content %}
{% endblock %}

<footer class="footer">
    <div class="container">
        <p class="text-muted footer_text">&copy; 2016 SiliSili. All Rights Reserved.</p>
    </div>
</footer>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'bootstrap-3.3.7/js/bootstrap.min.js' %}"></script>
<script>
    /* Show dropdown when hover */
    $('ul.nav li.dropdown').hover(function () {
        $(this).find('.dropdown-menu').stop(true, true).delay(200).fadeIn(100);
    }, function () {
        $(this).find('.dropdown-menu').stop(true, true).delay(200).fadeOut(100);
    });
</script>

{# Notification #}
<script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
<script src="{% static 'notifications/notification.js' %}" type="text/javascript"></script>
{% register_notify_callbacks callbacks='fill_notification_badge,gen_notification_list' %}

{% block footer %}
{% endblock %}

</body>
</html>